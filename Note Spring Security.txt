DB_PASSWORD=Sathish@123
DB_USERNAME=postgres
JDBC_CONNECTION_STRING=jdbc:postgresql://localhost:5432/postgres
JWT_PRIVATE_KEY=MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQCsW8LGs41uVWTSUln+bipJXir9eoarApftTXUJnSyiHmup3ZGTcAOl6q9gLjweP4k+gy4grS4sytmUOxRk4DV4rTH7cjS2Jmx/V7/qP8RoETcB4JgLmVgtrIaYmYWqxt1Uzf7RrgVaZnyxBGXa7mqFWaaeqHROcQ/TfoJOSO+326VMtItOQZp+TonBEWk5vwmDVR4ueZ6gwanK00eEGZjMlTsQesYC5IAVzOE9E1zjpk/EYU7ZVbQEN3BDbu6w657uKt0Gf8/vrZohde6171nfmbbTJrjylm4RT1jz/24FPCa6BSJY7PxWivhKfneQuXp2hqByUH6/YpHc1V3mJhklAgMBAAECggEAAnMlcBSSQIy3K6QfAlZHhJZxjvvEWT7msOlGbhYNUdqT1iy/inRvoNaWmovdr+JgTYKoz68Wdm2FrS0vy4VCTU5M5RGI/UPLi/3PzQEOBhqkiQLLtnJ+BdwrZ5TbCQPdlnx9EDbkfZXyVMPGvNdhrTaKfzvOt2S1AGEOchVoTtkq5iNzJzdKiME4n6RVspzhP7nFaHXKkrEiTDz3qmYvOfUEINBRSID8BQ9Ksu3VW24a7tSpNNAsjgAnVl6LGGv9iDroKaVitIUWTN/zoCwQag1veOezNoORnwY286UrbdEPqmStixyVX/bUm6WNKO/6pFVNfXG04VJQGIsQbVoy+wKBgQDRQMXFLQG4xsyaA+3ipySz+bD4tTQzeYEt/Djuo3s5ZegZX5qMcbKJFB4+c50e+b4Xo0w0maEnLsF1Z62toegOnu/K9gFbwTDFprM3ntEZP6UDu+TQVZb1Jl8DWXO1bU4zHyW1L8LrI29JFjUHLlThUN+rTFnIrpD6rK4fPycQ9wKBgQDS3PqmETACrur0CUbihCc4YIycrzg3w/ukhDCQ11DWXJQZWwIAc9pJ/eLrR7w+ZBPRFlajZNbwjCmfePzmpo6AK+6y0qUbk4sIbplak9Y5coN28qiGB42FHzNl/oyGcQtc4Cv7lAld3OTWPFm09NY3f4kM2lUpfBXFH56qIc77wwKBgQCUlOCZRH7vfEG1rsqQYMx/+vE9eDVLw6AFTg4C7RRHSmQG+EqeJPF3wlBDWgacAwuGb05iHyA92UZHHkpFeyxyjUqJnCqUw1XlUpv5B41D11xNjXJIuC2LfyaCE1dE4Qtg42H8CKDoI+4WQG2A3tYocyuOz5UFGWcah9jPmSEdOwKBgGRjYk1nx2SvpBo0xHOZGRcFGEyMOwaJnqdPa9O5Profbz63Djfq8BTj84GyMFO/z5NuwCagHph9El/i+PxSdWtd/xFRqdt8HegQx5/Q3F+TPjWGB2dv9xdWqGC5lGt5LEC2VRo7+02dmbDJIKg/HDFl3XiqBXtvoOmtSRuUZveDAoGAVZ9Fkb70xKs6QlUiI8pwpUPChh4nWmGdNzF5628Vv584348gutnAem2iBUYUtNR6kypj/4BI+MGl+rZWmgp5zqaJGoVk2PslmUQLp1zeXDLRYliGCCpNaCe31PEO/GxOU5viWU9CeOMotAUM7nAX84OC0Cz+W2JCeTA0IIkRMiU
JWT_PUBLIC_KEY=MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEArFvCxrONblVk0lJZ/m4qSV4q/XqGqwKX7U11CZ0soh5rqd2Rk3ADpeqvYC48Hj+JPoMuIK0uLMrZlDsUZOA1eK0x+3I0tiZsf1e/6j/EaBE3AeCYC5lYLayGmJmFqsbdVM3+0a4FWmZ8sQRl2u5qhVmmnqh0TnEP036CTkjvt9ulTLSLTkGafk6JwRFpOb8Jg1UeLnmeoMGpytNHhBmYzJU7EHrGAuSAFczhPRNc46ZPxGFO2VW0BDdwQ27usOue7irdBn/P762aIXXute9Z35m20ya48pZuEU9Y8/9uBTwmugUiWOz8Vor4Sn53kLl6doagclB+v2KR3NVd5iYZJQIDAQAB

API Call OAuth :
-----------------
1. Request Type -- Grant Type 
   URL : http://localhost:8061/oauth2/token
   >> In Authorization type -- Basic Auth
   username : client_id
   password : client_secret
   >> In Body select -- x-www-form-urlencoded
	grant_type : your_grant_type
	username : user_email
   	password : user_password

2. Request Type -- Refresh Token 
   URL : http://localhost:8061/oauth2/token
   >> In Authorization type -- Basic Auth
   username : client_id
   password : client_secret
   >> In Body select -- x-www-form-urlencoded
	grant_type : refresh_token
	refresh_token : user_refresh_token

   >>>>**** For Authorization Code 
	POST /oauth2/token
	Content-Type: application/x-www-form-urlencoded

	grant_type=refresh_token
	client_id=auth_code_client
	refresh_token=REFRESH_TOKEN_VALUE

3. Request Type -- Client Credentials 
   URL : http://localhost:8061/oauth2/token
   >> In Authorization type -- Basic Auth
   username : client_id
   password : client_secret
   >> In Body select -- x-www-form-urlencoded
	grant_type : client_credentials

4. Revoke the Refresh Token
    URL : http://localhost:8061/oauth2/revoke
   >> In Authorization type -- Basic Auth
   username : client_id
   password : client_secret
   >> In Body select -- x-www-form-urlencoded
	token_type_hint : refresh_token
	token : your_refresh_token
	

Spring Boot 3.x and Java 21 :
-----------------------------

1. Spring Boot 3.x, it uses Spring Security 6 under the hood, fully aligned with Jakarta EE (no javax.*).
2. OAuth2 / OIDC support is built-in for login with providers like Google, GitHub, or custom IdPs.



CustomGrantAuthenticationConverter
   ↓
CustomGrantAuthenticationToken
   ↓
CustomGrantAuthenticationProvider
   ↓
TokenGenerator (JWT + Refresh Token)
   ↓
OAuth2AuthorizationService (InMemory)



Authorization Code Flow :
--------------------------

The authorization server is configured with Spring Authorization Server to enforce PKCE, authenticate users, issue authorization codes, and generate JWTs containing user authorities.

http://localhost:8062/authenticate/sso-login

React → /authenticate/login
      → Auth Server /oauth2/authorize (state + PKCE)
      → Auth Server /login
      → /authenticate/callback?code=xxx&state=yyy
      → /oauth2/token
      → Cookies set
      → Redirect → React


React ──▶ RESOURCE/auth/login
             ↓
        Auth Server (/authorize)
             ↓
React ◀─ /auth/callback (code)
             ↓
        Auth Server (/token)
             ↓
        Cookies set
             ↓
React ──▶ /api/**


React → Resource Server (/login)
Resource Server → Auth Server (/authorize)
Auth Server → Login page
Auth Server → Resource Server (/callback)
Resource Server → Auth Server (/token)
Auth Server → JWT


With Google login, the flow becomes:

React → BFF (/authenticate/login)
BFF → Authorization Server
Authorization Server → Google OAuth
Google → Authorization Server
Authorization Server → BFF (code)
BFF → Authorization Server (/token)
BFF → sets cookies → React

How Azure AD SSO fits later (high level):

React → Resource Server (BFF)
BFF → Authorization Server
Authorization Server → Azure AD (SSO)
Azure AD → Authorization Server
Authorization Server → BFF (code)
BFF → Authorization Server (/token)
BFF → Cookies → React


Auth success
 ↓
/authenticate/callback
 ↓
Set HttpOnly cookie: SSO_INIT=true
 ↓
Redirect → /sso-page
 ↓
React calls /profile
 ↓
Backend checks:
  - valid auth cookie
  - SSO_INIT cookie present
 ↓
✔ allow → clear SSO_INIT
✖ deny → 401




























